# 2025研究记录

## 2025/6 机器人环境构建

- 实际难题：
  
  - 现有机器人构筑环境老旧，需要能够在ubuntu20.04环境下运行
  - 没有远程开发环境，只能在主机上开发使用繁琐

- 研究难题与解决方法：
  
  - 研究难题:
  
    1. 查看如何在ubuntu20.04环境上安装远程开发环境
       - [x] solved?
    2. 查询如何将ubuntu18.04的软件包移植到ubuntu20.04的环境下运行
       - [ ] solved?
    3. catkin build 失败

  - 解决方法：
  
    1. 在ubuntu20.04上安装vnc实现远程开发

      ```bash
        #1.安装openssh-server
        sudo apt install openssh-server
        #2.查看桌面环境 使用gnome
        echo $DESKTOP_SESSION
        #3.change display manager
        sudo apt install lightdm
        #4. download x11vnc
        sudo apt install x11vnc
        #5. set vnc password
        sudo x11vnc -storepasswd /etc/.vncpasswd
    
      ```

      ```bash
        #6. set vnc service 
        sudo nano /etc/systemd/system/x11vnc.service
        
        [Unit]
        Description=x11vnc (Remote access)
        After=network-online.target

        [Service]
        Type=simple
        ExecStart=/usr/bin/x11vnc -auth guess -display :0 -rfbauth /etc/.vncpasswd -rfbport 5900 -forever -loop -noxdamage -repeat -shared
        ExecStop=/bin/kill -TERM $MAINPID
        ExecReload=/bin/kill -HUP $MAINPID
        KillMode=control-group
        Restart=on-failure

        [Install]
        WantedBy=graphical.target
        ```

        ```bash
        #7. input commands
        sudo systemctl daemon-reload
        sudo systemctl enable x11vnc
        sudo systemctl start x11vnc

        #8 usable code
        vncserver -kill :n
        vncserver -list
        hostname -I
      ```

    - 参考自 [vstone](https://vstoneofficial.github.io/lightrover_webdoc/setup/softwareSetupUbuntu/)有关于ubuntu设置的部分

    2. 查看ubuntu18.04中所使用的组件在ubuntu20.04的环境下安装对应的组件

       - icartmini
       - YP-spur
       - ARToolkit-2.72.1.tgz  ARToolKit环境设置 和修改配置并复制到user/lib
       - Qt 安装
       - 复制各个软件包注意路径设置
       - urg_node (激光传感器) 包安装
       - `sudo chmod 666 /dev/ttyUSB0`
       - 删除旧的 ROS 密钥：`sudo apt-key del F42ED6FBAB17C654 # 替换为错误信息中提供的密钥ID`
       - 重新添加 ROS 公钥：

        ```bash
            sudo rm /etc/apt/sources.list.dros-latest.list # 暂时删除旧的源文件
            sudo apt update # 更新一下，确保没有残留问题
            # 重新添加 GPG 密钥
            sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg

            # 重新添加 ROS 软件源，并指定密钥文件
            echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros/ubuntu $(. /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros-latest.list > /dev/null
         ```

- 意义： 能够使机器人获得更多运行支持，便于进行下一步研究和后来者的继续研究
